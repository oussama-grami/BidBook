{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["App"]}},"/auth/signup":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"201":{"description":"User has been successfully registered","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpResponseDto"}}}}},"summary":"Register a new user","tags":["Authentication"]}},"/auth/verify-email":{"post":{"operationId":"AuthController_verifyEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailDto"}}}},"responses":{"200":{"description":"Email has been verified successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailResponseDto"}}}}},"summary":"Verify user email address","tags":["Authentication"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"User has been authenticated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"User login","tags":["Authentication"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"responses":{"200":{"description":"Access token has been refreshed","content":{"application/json":{"schema":{"type":"string"}}}}},"security":[{"refresh_token":[]}],"summary":"Refresh access token","tags":["Authentication"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"User has been logged out successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutResponseDto"}}}}},"security":[{"access_token":[]}],"summary":"User logout","tags":["Authentication"]}},"/auth/mfa/verify":{"post":{"operationId":"AuthController_verifyMfaToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaVerifyDto"}}}},"responses":{"200":{"description":"MFA code has been verified successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaVerifyResponseDto"}}}}},"security":[{"bearer":[]},{"access_token":[]}],"summary":"Verify MFA code during login","tags":["Authentication"]}},"/auth/mfa/generate":{"get":{"operationId":"AuthController_generateMfaSecret","parameters":[],"responses":{"200":{"description":"MFA setup information has been generated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaGenerateResponseDto"}}}}},"security":[{"access_token":[]}],"summary":"Generate MFA secret and QR code","tags":["Authentication"]}},"/auth/mfa/enable":{"post":{"operationId":"AuthController_enableMfa","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaEnableDto"}}}},"responses":{"200":{"description":"MFA has been enabled successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaEnableResponseDto"}}}}},"security":[{"access_token":[]}],"summary":"Enable MFA for user account","tags":["Authentication"]}},"/auth/mfa/disable":{"post":{"operationId":"AuthController_disableMfa","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisableMfaDto"}}}},"responses":{"200":{"description":"MFA has been disabled successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaDisableResponseDto"}}}}},"security":[{"access_token":[]}],"summary":"Disable MFA for user account","tags":["Authentication"]}},"/auth/google":{"get":{"operationId":"AuthController_googleAuth","parameters":[],"responses":{"200":{"description":""}},"summary":"Initiate Google OAuth login flow","tags":["Authentication"]}},"/auth/google/callback":{"get":{"operationId":"AuthController_googleAuthCallback","parameters":[],"responses":{"200":{"description":"User has been authenticated via Google OAuth","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthResponseDto"}}}}},"summary":"Handle Google OAuth callback","tags":["Authentication"]}},"/auth/github":{"get":{"operationId":"AuthController_githubAuth","parameters":[],"responses":{"200":{"description":""}},"summary":"Initiate GitHub OAuth login flow","tags":["Authentication"]}},"/auth/github/callback":{"get":{"operationId":"AuthController_githubAuthCallback","parameters":[],"responses":{"200":{"description":"User has been authenticated via GitHub OAuth","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthResponseDto"}}}}},"summary":"Handle GitHub OAuth callback","tags":["Authentication"]}},"/auth/profile":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"User profile retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"security":[{"access_token":[]}],"summary":"Get authenticated user profile","tags":["Authentication"]}}},"info":{"title":"Books Project","description":"The nestjs booksproject API description","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"SignUpDto":{"type":"object","properties":{"imageUrl":{"type":"string","format":"binary"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string","format":"email"},"password":{"type":"string"}},"required":["firstName","lastName","email","password"]},"SignUpResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message after signup","example":"User registered successfully. Please verify your email."}},"required":["message"]},"VerifyEmailDto":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]},"VerifyEmailResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message after email verification","example":"Email verified successfully"}},"required":["message"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string"},"rememberMe":{"type":"boolean"}},"required":["email","password"]},"UserDto":{"type":"object","properties":{"id":{"type":"number","description":"User ID","example":"1"},"email":{"type":"string","description":"User email","example":"user@example.com"},"firstName":{"type":"string","description":"User first name","example":"John"},"lastName":{"type":"string","description":"User last name","example":"Doe"},"role":{"enum":[0,1],"type":"number","description":"User role","example":"admin"},"imgUrl":{"type":"string","description":"User image"},"isMFAEnabled":{"type":"boolean","description":"Whether MFA is enabled","example":true}},"required":["id","email","firstName","lastName","role","imgUrl","isMFAEnabled"]},"LoginResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"JWT refresh token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"$ref":"#/components/schemas/UserDto"}},"required":["user"]},"LogoutResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message after logout","example":"Logged out successfully"}},"required":["message"]},"MfaVerifyDto":{"type":"object","properties":{"code":{"type":"string","pattern":"/^(\\d{6}|[a-zA-Z0-9]{8})$/"},"rememberMe":{"type":"boolean","default":false}},"required":["code"]},"MfaVerifyResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"JWT refresh token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"$ref":"#/components/schemas/UserDto"}},"required":["user"]},"MfaGenerateResponseDto":{"type":"object","properties":{"secret":{"type":"string","description":"MFA secret key","example":"JBSWY3DPEHPK3PXP"},"qrCode":{"type":"string","description":"QR code data URL for scanning","example":"data:image/png;base64,iVBORw0KGgoA..."},"otpAuthUrl":{"type":"string","description":"OTP Auth URL for manual setup","example":"otpauth://totp/BookApp:user@example.com?secret=JBSWY3DPEHPK3PXP&issuer=BookApp"}},"required":["secret","qrCode","otpAuthUrl"]},"MfaEnableDto":{"type":"object","properties":{"code":{"type":"string","minLength":6,"maxLength":6}},"required":["code"]},"MfaEnableResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message after enabling MFA","example":"MFA enabled successfully"},"recoveryCodes":{"description":"Recovery codes for account access if MFA device is lost","example":["6b3e5f9a","12da45c8","9f7e6d5c"],"type":"array","items":{"type":"string"}}},"required":["message","recoveryCodes"]},"DisableMfaDto":{"type":"object","properties":{"password":{"type":"string","minLength":8}},"required":["password"]},"MfaDisableResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message after disabling MFA","example":"MFA disabled successfully"}},"required":["message"]},"OAuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"JWT refresh token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"$ref":"#/components/schemas/UserDto"}},"required":["user"]}}}}